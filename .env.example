# ============================================================================
# Sake Sensei - Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# AWS Configuration
# ----------------------------------------------------------------------------
# IMPORTANT: All region-specific settings should be configured here
# Default region: us-west-2 (Oregon) - supports Bedrock Claude 4.5 Sonnet
AWS_REGION=us-west-2
AWS_ACCOUNT_ID=your-aws-account-id
AWS_PROFILE=default

# CDK Deployment Region (should match AWS_REGION)
CDK_DEFAULT_REGION=us-west-2
CDK_DEFAULT_ACCOUNT=your-aws-account-id

# ----------------------------------------------------------------------------
# Amazon Cognito (Authentication)
# ----------------------------------------------------------------------------
COGNITO_REGION=us-west-2
COGNITO_USER_POOL_ID=us-west-2_XXXXXXXXX
COGNITO_CLIENT_ID=your-cognito-client-id
COGNITO_CLIENT_SECRET=your-cognito-client-secret  # Optional, if using client secret
COGNITO_DOMAIN=your-app.auth.us-west-2.amazoncognito.com

# ----------------------------------------------------------------------------
# Amazon Bedrock AgentCore
# ----------------------------------------------------------------------------
# Runtime (set after deploying agent with scripts/deploy_agent.sh)
# Leave empty to use direct Bedrock fallback (legacy mode)
AGENTCORE_RUNTIME_URL=
AGENTCORE_AGENT_ID=
AGENTCORE_AGENT_ALIAS_ID=

# Gateway (MCP)
AGENTCORE_GATEWAY_ID=your-gateway-id
AGENTCORE_GATEWAY_URL=https://gateway.bedrock.amazonaws.com

# Memory
AGENTCORE_MEMORY_ID=your-memory-id
AGENTCORE_MEMORY_TTL=86400  # 24 hours in seconds

# Identity
AGENTCORE_IDENTITY_PROVIDER=cognito
AGENTCORE_OAUTH_DISCOVERY_URL=https://cognito-idp.us-west-2.amazonaws.com/USERPOOL_ID/.well-known/openid-configuration

# ----------------------------------------------------------------------------
# Amazon DynamoDB
# ----------------------------------------------------------------------------
DYNAMODB_ENDPOINT=  # Leave empty for production, set for local development
DYNAMODB_USERS_TABLE=SakeSensei-Users
DYNAMODB_SAKE_TABLE=SakeSensei-SakeMaster
DYNAMODB_BREWERY_TABLE=SakeSensei-BreweryMaster
DYNAMODB_TASTING_TABLE=SakeSensei-TastingRecords

# ----------------------------------------------------------------------------
# Amazon S3
# ----------------------------------------------------------------------------
S3_BUCKET_IMAGES=sakesensei-images-{env}
S3_BUCKET_REGION=us-west-2

# ----------------------------------------------------------------------------
# Lambda Functions
# ----------------------------------------------------------------------------
LAMBDA_RECOMMENDATION_ARN=arn:aws:lambda:us-west-2:ACCOUNT:function:sakesensei-recommendation
LAMBDA_PREFERENCE_ARN=arn:aws:lambda:us-west-2:ACCOUNT:function:sakesensei-preference
LAMBDA_TASTING_ARN=arn:aws:lambda:us-west-2:ACCOUNT:function:sakesensei-tasting
LAMBDA_BREWERY_ARN=arn:aws:lambda:us-west-2:ACCOUNT:function:sakesensei-brewery
LAMBDA_IMAGE_RECOGNITION_ARN=arn:aws:lambda:us-west-2:ACCOUNT:function:sakesensei-image-recognition

# ----------------------------------------------------------------------------
# Streamlit Configuration
# ----------------------------------------------------------------------------
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=localhost
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false
STREAMLIT_THEME_BASE=light

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
APP_NAME=Sake Sensei
APP_ENV=development  # development | staging | production
APP_DEBUG=true
APP_LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# ----------------------------------------------------------------------------
# Security
# ----------------------------------------------------------------------------
SECRET_KEY=your-secret-key-for-session-encryption-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60

# ----------------------------------------------------------------------------
# API Rate Limiting (for local testing)
# ----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# ----------------------------------------------------------------------------
# Bedrock Model Configuration
# ----------------------------------------------------------------------------
# Claude Sonnet 4.5 - Using US inference profile
# Note: Sonnet 4.5 requires inference profile, not direct model ID
BEDROCK_MODEL_ID=us.anthropic.claude-sonnet-4-5-20250929-v1:0
BEDROCK_MAX_TOKENS=4096
BEDROCK_TEMPERATURE=0.7
BEDROCK_STREAMING=true

# ----------------------------------------------------------------------------
# Image Recognition Configuration
# ----------------------------------------------------------------------------
VISION_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
IMAGE_MAX_SIZE_MB=5
IMAGE_ALLOWED_TYPES=image/jpeg,image/png,image/webp

# ----------------------------------------------------------------------------
# Recommendation Algorithm Settings
# ----------------------------------------------------------------------------
RECOMMENDATION_MAX_RESULTS=5
RECOMMENDATION_DIVERSITY_WEIGHT=0.3
RECOMMENDATION_COLLABORATIVE_WEIGHT=0.3
RECOMMENDATION_CONTENT_WEIGHT=0.4

# ----------------------------------------------------------------------------
# Copilot / ECS Configuration
# ----------------------------------------------------------------------------
COPILOT_APPLICATION_NAME=sakesensei
COPILOT_SERVICE_NAME=streamlit-app
COPILOT_ENVIRONMENT_NAME=dev  # dev | prod

# ECS Service URL (set after deployment)
ECS_SERVICE_URL=http://sakese-Publi-XXXXX.us-west-2.elb.amazonaws.com

# ALB Configuration
ALB_HEALTH_CHECK_PATH=/
ALB_HEALTH_CHECK_INTERVAL=30
ALB_HEALTH_CHECK_TIMEOUT=5

# ----------------------------------------------------------------------------
# CI/CD Configuration
# ----------------------------------------------------------------------------
GITHUB_REPOSITORY=yourusername/sake-sensei
DOCKER_REGISTRY=123456789.dkr.ecr.us-west-2.amazonaws.com
ECR_REPOSITORY=sakesensei-streamlit

# ----------------------------------------------------------------------------
# Monitoring & Observability
# ----------------------------------------------------------------------------
ENABLE_XRAY=true
ENABLE_CLOUDWATCH_LOGS=true
CLOUDWATCH_LOG_GROUP=/aws/sakesensei
METRICS_NAMESPACE=SakeSensei

# ----------------------------------------------------------------------------
# External Services (Optional)
# ----------------------------------------------------------------------------
# Slack webhook for notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Sentry for error tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
FEATURE_IMAGE_RECOGNITION=true
FEATURE_FOOD_PAIRING=true
FEATURE_SOCIAL_SHARING=false
FEATURE_EXPORT_HISTORY=true

# ----------------------------------------------------------------------------
# Development / Testing
# ----------------------------------------------------------------------------
# Set to true to use mock data instead of real AWS services
USE_MOCK_DATA=false

# Set to true to enable debug logging
DEBUG_SQL_QUERIES=false
DEBUG_API_REQUESTS=false

# Test user credentials (development only)
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=TestPassword123!

# ----------------------------------------------------------------------------
# Database Seeding
# ----------------------------------------------------------------------------
SEED_SAKE_COUNT=100
SEED_BREWERY_COUNT=20
SEED_USER_COUNT=10

# ----------------------------------------------------------------------------
# Region-Specific Settings (IMPORTANT)
# ----------------------------------------------------------------------------
# These values MUST match your AWS_REGION setting above
# If you change AWS_REGION, update these accordingly:
#
# us-west-2 (Oregon) - Default, supports all required services
# - Bedrock: ✅ Claude 4.5 Sonnet available
# - Cognito: ✅ Supported
# - DynamoDB: ✅ Supported
# - S3: ✅ Supported
# - Lambda: ✅ Supported
# - ECS Fargate: ✅ Supported
#
# Other regions: Verify Bedrock Claude 4.5 availability before changing
# ----------------------------------------------------------------------------